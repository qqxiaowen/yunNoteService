webpackJsonp([4],{hp21:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Dd8w"),o=t.n(a),i=(t("mtWM"),{data:function(){return{info:{oldpassword:"",newpassword:"",surepassword:""},token:{token:""},imageUrl:"",isshowpassword:!1}},methods:{gettoken:function(){var e=this;this.$axios.get("http://upload.mawenli.xyz").then(function(s){e.token.token=s.data})},handleAvatarSuccess:function(e,s){this.info.avatar=e.url},reviseinfo:function(){var e=this;this.info.newpassword!=this.info.surepassword?this.$message.warning("两次输入的密码不一致"):this.$axios.put("/user/"+this.$route.query.email,this.info).then(function(s){if(200==s.code){e.$message.success(s.msg),setTimeout(function(){e.$router.push("/")},500);e.$store.commit("CHANGEINFO",{avatar:"",email:"",username:"",password:""})}else e.$message.error(s.msg)})},handlepassword:function(){this.isshowpassword=!0},getuserinfo:function(){var e=this,s=this.$route.query.email;this.$axios.get("/user/"+s).then(function(s){e.info=o()({},e.info,s.data)})}},created:function(){this.getuserinfo(),this.gettoken()}}),n={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-breadcrumb",{staticStyle:{margin:"15px 0"},attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("修改个人信息页")])],1),e._v(" "),t("div",{staticClass:"revisebox"},[t("el-form",{ref:"form",staticClass:"form_ys",attrs:{"label-width":"140px","label-position":"left"}},[t("el-form-item",{attrs:{label:"您的邮箱:"}},[t("el-input",{attrs:{disabled:""},model:{value:e.info.email,callback:function(s){e.$set(e.info,"email",s)},expression:"info.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"您的用户名:"}},[t("el-input",{model:{value:e.info.username,callback:function(s){e.$set(e.info,"username",s)},expression:"info.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"点击修改您的头像:"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{method:"psot",action:"https://up-z1.qiniup.com",data:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1}},[e.info.avatar?t("img",{staticClass:"avatar",attrs:{src:e.info.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),e.isshowpassword?t("div",[t("el-form-item",{attrs:{label:"请输入您的原密码:"}},[t("el-input",{attrs:{type:"password"},model:{value:e.info.oldpassword,callback:function(s){e.$set(e.info,"oldpassword",s)},expression:"info.oldpassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"请输入您的新密码:"}},[t("el-input",{attrs:{type:"password"},model:{value:e.info.newpassword,callback:function(s){e.$set(e.info,"newpassword",s)},expression:"info.newpassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"再次输入:"}},[t("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(s){return"button"in s||!e._k(s.keyCode,"enter",13,s.key,"Enter")?e.reviseinfo(s):null}},model:{value:e.info.surepassword,callback:function(s){e.$set(e.info,"surepassword",s)},expression:"info.surepassword"}})],1)],1):t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handlepassword}},[e._v("点击修改密码")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.reviseinfo}},[e._v("点击修改")])],1)],1)],1)},staticRenderFns:[]};var r=t("VU/8")(i,n,!1,function(e){t("pSzs")},"data-v-5a28d234",null);s.default=r.exports},pSzs:function(e,s){}});
//# sourceMappingURL=4.e08fc8d9ab631560e678.js.map